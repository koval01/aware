{% load static %}

{# Template for generating a tape of records on the main page of the site. #}
{# Imagine that this code was not written by me. I don't really like him. #}

{% if typeload == 'newsession' and covid_stat_append %}
    {% if covid_ua.0 %}
        <div class="col-12 col-lg-12 padding-block-center-box">
            <div class="user box aos-init aos-animate" data-aos="fade-up">
                <div style="float: left; ">
                    <label class="username">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ COVID-19 –≤ –£–∫—Ä–∞–∏–Ω–µ</label><br>
                    <label class="city"><br/>
                        <h6>üò∑–ë–æ–ª—å–Ω—ã—Ö Covid-19: <b>{{ covid_ua.0 }} (+{{ covid_ua.1 }})</b></h6>
                        <h6>‚ù§Ô∏è–í—ã–∑–¥–æ—Ä–æ–≤–µ–ª–∏: <b>{{ covid_ua.2 }}</b></h6>
                        <h6>üíî–õ–µ—Ç–∞–ª—å–Ω—ã—Ö –∏—Å—Ö–æ–¥–æ–≤: <b>{{ covid_ua.3 }}</b></h6>
                        <h6>üìù–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: <b>{{ covid_ua.4 }}</b></h6>
                        <br/>
                        <h6>üìÖ<b>{{ covid_ua.5 }}</b></h6>
                        <br/>
                    </label><br/>
                </div>
            </div>
        </div>
    {% endif %}
    {% if covid_ru.0 %}
        <div class="col-12 col-lg-12 padding-block-center-box">
            <div class="user box aos-init aos-animate" data-aos="fade-up">
                <div style="float: left; ">
                    <label class="username">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ COVID-19 –≤ –†–æ—Å—Å–∏–∏</label><br>
                    <label class="city"><br/>
                        <h6>üò∑–ë–æ–ª—å–Ω—ã—Ö Covid-19: <b>{{ covid_ru.1 }} (+{{ covid_ru.2 }})</b></h6>
                        <h6>‚ù§Ô∏è–í—ã–∑–¥–æ—Ä–æ–≤–µ–ª–∏: <b>{{ covid_ru.3 }}</b></h6>
                        <h6>üíî–õ–µ—Ç–∞–ª—å–Ω—ã—Ö –∏—Å—Ö–æ–¥–æ–≤: <b>{{ covid_ru.4 }}</b></h6>
                        <h6>üìù–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: <b>{{ covid_ru.0 }}</b></h6>
                        <br/>
                        <h6>üìÖ<b>{{ covid_ru.5 }}</b></h6>
                        <br/>
                    </label><br/>
                </div>
            </div>
        </div>
    {% endif %}
{% endif %}

{% if typeload == "newsession" %}
    {% if c_result %}
        <div class="col-12 col-lg-12 padding-block-center-box">
            <div class="user box aos-init aos-animate" data-aos="fade-up">
                <div style="float: left;">
                    <label class="username">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä</label><br>
                    <label class="city"><i>{{ c_input }}&nbsp;=&nbsp;{{ c_result }}</i></label><br>
                </div>
            </div>
        </div>
    {% endif %}
    {% if translate_result %}
        <div class="col-12 col-lg-12 padding-block-center-box">
            <div class="user box aos-init aos-animate" data-aos="fade-up">
                <div style="float: left;">
                    <label class="username">–ü–µ—Ä–µ–≤–æ–¥—á–∏–∫</label><br>
                    <label class="city">
                        <i>{{ search }}</i>
                        <br/><br/>
                        <b>{{ translate_result }}</b>
                        <br/><br/>
                    </label><br>
                </div>
            </div>
        </div>
    {% endif %}
    {% if news_search_in_str %}
        <div class="col-12 col-lg-12 padding-block-center-box">
            <div class="user box aos-init aos-animate" data-aos="fade-up">
                <div style="float: left;">
                    <label class="username"><a href="{% url 'news_page' %}">
                        –ù–æ–≤–æ—Å—Ç–∏ –æ—Ç AWARE</a>
                    </label><br>
                    <label class="city"><i>–ü–æ–¥–±–æ—Ä–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –æ—Ç AWARE</i></label><br>
                </div>
            </div>
        </div>
    {% endif %}
    {% if weather %}
        <div class="col-12 col-lg-12 padding-block-center-box" style="margin: auto;">
            <div class="user box aos-init aos-animate" data-aos="fade-up">
                <div style="float: left;">
                    <div class="col-xs-12">
                        <div class="weather-panel col-xs-12 col-sm-12"
                        style="color: #fff;">
                            <div class="col-xs-6">
                                <h2>{{ weather.now_weather.name }}<br>
                                    <small style="color: inherit;font-size: 50%;">
                                        {% now "l, j E" %}
                                    </small>
                                </h2>
                                <p class="h3">
                                    {{ weather.now_weather.weather.0.icon|get_weather_ico|safe }}
                                    &nbsp;{{ weather.now_weather.weather.0.description|capfirst }}
                                </p>
                                <p>
                                    <i class="fas fa-temperature-low"></i>
                                    –û—â—É—â–∞–µ—Ç—Å—è –∫–∞–∫ {{ weather.now_weather.main.feels_like|floatformat:"0" }}¬∞
                                </p>
                                <p>
                                    <i class="fas fa-wind"></i>
                                    {{ weather.now_weather.wind.speed }} –º/—Å–µ–∫
                                </p>
                            </div>
                            <div class="col-xs-6 text-center">
                                <div class="h1 temperature">
                                    <span style="font-size: 2em;">{{ weather.now_weather.main.temp|floatformat:"0" }}¬∞</span>
                                    <br>
                                    <small style="color: inherit;font-size: 50%;">
                                        {{ weather.now_weather.main.temp_min|floatformat:"0" }}¬∞ / {{ weather.now_weather.main.temp_max|floatformat:"0" }}¬∞
                                    </small>
                                </div>
                            </div>
                            <div class="col-xs-12">
                                <ul class="list-inline row forecast">
                                    <li id="{{ 24|get_random_string }}" style="border-top: 1px solid #fff;" class="col-xs-4 col-sm-2 text-center">
                                        <h3 class="h5">{% now "D" %}</h3>
                                        <p>
                                            {{ weather.now_weather.weather.0.icon|get_weather_ico|safe }}
                                            <br>
                                            {{ weather.now_weather.main.temp|floatformat:"0" }}¬∞
                                        </p>
                                    </li>
                                    {% for weather_el in weather.future_weather %}
                                        <li id="{{ 24|get_random_string }}" style="border-top: 1px solid #fff;" class="col-xs-4 col-sm-2 text-center">
                                            <h3 class="h5">{{ forloop.counter|add_days_by_timestamp|date:"D" }}</h3>
                                            <p>
                                                {{ weather_el.weather.0.icon|get_weather_ico|safe }}
                                                <br>
                                                {{ weather_el.main.temp|floatformat:"0" }}¬∞
                                            </p>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
{% endif %}

{% if namaz_data %}
    {% for el in namaz_data %}
        <div class="col-12 col-lg-12 padding-block-center-box">
            <div class="user box aos-init aos-animate" data-aos="fade-up">
                <div style="float: left;">
                    <label class="username">–ù–∞–º–∞–∑ –Ω–∞ {{ el.time }}, {{ el.hijri_day }} –†–∞–º–∞–¥–∞–Ω {{ el.hijri_year }}</label><br>
                    <label class="city">
                        <p>
                            <br/>
                        {% for i in el.timings %}
                            {{ i }}<br/>
                        {% endfor %}
                            <br/>
                            –ú–µ—Ç–æ–¥–∏–∫–∞ —Ä–∞—Å—á–µ—Ç–∞: –í—Å–µ–º–∏—Ä–Ω–∞—è –∏—Å–ª–∞–º—Å–∫–∞—è –ª–∏–≥–∞
                            <br/><br/>
                            –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–æ–Ω–∞: {{ el.timezone }}
                            <br/>
                            –û–±–Ω–æ–≤–ª–µ–Ω–æ: {{ el.update_time }} (–í—Ä–µ–º—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)
                        </p>
                    </label><br>
                </div>
            </div>
        </div>
    {% endfor %}
{% endif %}
{% if videos %}
    <div class="col-12 col-lg-12 padding-block-center-box">
        <div class="user box aos-init aos-animate" data-aos="fade-up">
            <div style="float: left;">
                <label style="margin-bottom: 10%;" class="username"></label><br>
                <label class="city">
                    <div clas="video_view_block_aware" style="margin-right: 20px;min-width: 100%;float: left;max-width: 100%;">
                        <video width="100%" controls="controls" class="aware_video_feed_el photohub_item" id="video_player_block_aware"
                               autoplay="true" loop="loop" style="display: block;margin: 0 auto;width: min-content;max-width: 100%;max-height: 80vh;margin-bottom: 40px;">
                            <source src="{% url 'imageproxy' %}?data={{ videos.0.video.playAddr|link_encrypt_img }}&token={{ token_image_proxy }}&video_mode=1&sign={{ user_address_original|sign_address_encrypt }}" type="video/mp4;">
                        </video>
                    </div>
                    <div class="load_next_video_block_button">
                        <button style="margin:0 auto;display:block;background-color:#121213;visibility: hidden;margin-bottom: 5%;" class="btn btn-dark load-more-end-butt-search-array">
                            C–ª–µ–¥—É—é—â–µ–µ –≤–∏–¥–µ–æ&nbsp;
                            <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
                        </button>
                    </div>
                    <p>
                        <i class="far fa-eye"></i>
                        {{ videos.0.stats.playCount|num_rounder_custom }}
                        <br/>
                        <i class="fas fa-heart"></i>
                        {{ videos.0.stats.diggCount|num_rounder_custom }}
                        <br/>
                        <i class="far fa-comments"></i>
                        {{ videos.0.stats.commentCount|num_rounder_custom }}
                        <br/>
                        <i class="fas fa-share-alt"></i>
                        {{ videos.0.stats.shareCount|num_rounder_custom }}
                        <br/><br/>
                        {{ videos.0.desc }}
                    </p>
                </label><br>
            </div>
        </div>
    </div>
    {% if not videos.0.music.original %}
        <div class="col-12 col-lg-12">
            <div class="user box aos-init aos-animate" data-aos="fade-up">
                <img style="image-rendering: pixelated;width: 60px;height: 60px;border-radius: 50%;" class="lazyloaded"
                     data-src="{% url 'imageproxy' %}?data={{ videos.0.music.coverMedium|link_encrypt_img }}&video_mode=1&token={{ token_image_proxy }}&sign={{ user_address_original|sign_address_encrypt }}"
                     src="{% url 'imageproxy' %}?data={{ videos.0.music.coverMedium|link_encrypt_img }}&video_mode=1&token={{ token_image_proxy }}&sign={{ user_address_original|sign_address_encrypt }}">
                <div style="width: calc(100% - 90px); float: left; ">
                    <label class="status" data-toggle="tooltip" data-placement="top" data-original-title="1">
                        <i class="fas fa-compact-disc"></i>
                    </label>
                    <label class="username">
                        &nbsp;{{ videos.0.music.title }}
                    </label><br>
                    <label class="city">
                        <i class="fas fa-user"></i>
                        <span title="–ê–≤—Ç–æ—Ä">&nbsp;{{ videos.0.music.authorName }}</span>
                        <br/>
                        <i class="fas fa-record-vinyl"></i>
                        <span title="–ê–ª—å–±–æ–º">&nbsp;{{ videos.0.music.album }}</span>
                        <br/>
                        <i class="far fa-clock"></i>
                        <span title="–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å">&nbsp;{{ videos.0.music.duration|seconds_to_time }}</span>
                        <br/><br/>
                        <a href="{{ videos.0.music.playUrl }}" target="_blank">–ü–µ—Ä–µ–π—Ç–∏ –∫ —Ç—Ä–µ–∫—É</a>
                    </label><br>
                </div>
            </div>
        </div>
    {% endif %}
    <div class="col-12 col-lg-12">
        <div class="user box aos-init aos-animate" data-aos="fade-up">
            <img style="image-rendering: pixelated;width: 60px;height: 60px;border-radius: 50%;" class="lazyloaded"
                 data-src="{% url 'imageproxy' %}?data={{ videos.0.author.avatarMedium|link_encrypt_img }}&video_mode=1&token={{ token_image_proxy }}&sign={{ user_address_original|sign_address_encrypt }}"
                 src="{% url 'imageproxy' %}?data={{ videos.0.author.avatarMedium|link_encrypt_img }}&video_mode=1&token={{ token_image_proxy }}&sign={{ user_address_original|sign_address_encrypt }}">
            <div style="width: calc(100% - 90px); float: left; ">
                <label class="username">
                    {{ videos.0.author.nickname }}
                    {% if videos.0.author.uniqueId %}
                        (<a href="https://www.tiktok.com/@{{ videos.0.author.uniqueId }}">@{{ videos.0.author.uniqueId }}</a>)
                    {% endif %}
                    {% if videos.0.author.verified %}
                        <i class="fas fa-check"></i>
                    {% endif %}
                </label><br>
                <label class="city">
                    {# User profile description (bio) #}
                    {{ videos.0.author.signature }}
                </label><br>
            </div>
        </div>
    </div>
{% else %}
    {% for el in data %}
        {% if not additions and news_append %}
            {% if el.0.0 %}
                <div class="col-12 col-lg-12 padding-block-center-box">
                    <div class="user box aos-init aos-animate" data-aos="fade-up">
                        <div style="float: left;">
                            <label class="username">{{ el.0.0 }}</label><br>
                            <label class="city">
                                {# paste news image or text if this is a mobile device #}
                                {% if mobile == '1' %}
                                    <img src="{% url 'image_generate_api' %}?text={{ el.0.1 }}&author={{ el.0.2 }}&sign={{ user_address_original|sign_address_encrypt }}&token={{ token_image_proxy }}"
                                             class="photohub_item" onerror="imgError(this);" style="width:100%;margin-top: 3%;" alt="–û–±–ª–æ–∂–∫–∞ –Ω–æ–≤–æ—Å—Ç–Ω–æ–≥–æ –±–ª–æ–∫–∞">
                                {% else %}
                                    <br/>
                                    <i>
                                        {{ el.0.1 }}
                                    </i>
                                {% endif %}
                                <br/><br/>
                                <b>
                                    –ò—Å—Ç–æ—á–Ω–∏–∫ - <a href="{{ el.0.4 }}">{{ el.0.2 }}</a>
                                </b>
                                <br>
                                <i>
                                    <u>–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ {{ el.0.3 }} (UTC)</u>
                                </i>
                            </label><br>
                        </div>
                    </div>
                </div>
            {% endif %}
        {% endif %}
        {% if el.1.title %}
            <div class="col-12 col-lg-12 padding-block-center-box">
                <div class="user box aos-init aos-animate" data-aos="fade-up">
                    <div style="float: left;">
                        <label class="username"><a target="_blank" href="{{ el.1.link }}">
                            {{ el.1.title }}</a>
                        </label><br>
                        <label class="city">
                            {% if el.1.thumb and not el.1.youtube %}
                                <img
                                        id="{{ 32|get_random_string }}"
                                        src="{% url 'imageproxy' %}?data={{ el.1.thumb|link_encrypt_img }}&video_mode=1&token={{ token_image_proxy }}&sign={{ user_address_original|sign_address_encrypt }}"
                                        onerror="imgError(this);"
                                        style="margin-top: 1%;width: 20%;margin-right: 10px;height: auto;-webkit-appearance: none;border-radius: 5px;padding: 0;text-align: left;padding-bottom: 1px;box-shadow: 0 4px 15px 0 rgb(0 0 0 / 40%);"
                                        alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞"
                                >
                            {% elif el.1.youtube %}
                                <iframe
                                        id="{{ 32|get_random_string }}"
                                        src="https://www.youtube.com/embed/{{ el.1.youtube }}"
                                        title="YouTube video player"
                                        frameborder="0"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                                        allowfullscreen=""
                                        style="margin-top: 1%;width: 100%;margin-right: 10px;height: 45vh;-webkit-appearance: none;border-radius: 5px;padding: 0px;text-align: left;padding-bottom: 5px;box-shadow: 0 4px 15px 0 rgb(0 0 0 / 40%);"
                                ></iframe>
                            {% endif %}
                            <p>{{ el.1.displayLink }}</p>
                            <i>{{ el.1.snippet }}</i>
                        </label><br>
                    </div>
                </div>
            </div>
        {% endif %}
    {% endfor %}
{% endif %}